# 1261. åœ¨å—æ±¡æŸ“çš„äºŒå‰æ ‘ä¸­æŸ¥æ‰¾å…ƒç´ 

# é¢˜ç›®åœ°å€ï¼ˆ1261. åœ¨å—æ±¡æŸ“çš„äºŒå‰æ ‘ä¸­æŸ¥æ‰¾å…ƒç´ ï¼‰

<https://leetcode-cn.com/problems/find-elements-in-a-contaminated-binary-tree/>

## é¢˜ç›®æè¿°

```
<pre class="calibre18">```
ç»™å‡ºä¸€ä¸ªæ»¡è¶³ä¸‹è¿°è§„åˆ™çš„äºŒå‰æ ‘ï¼š

root.val == 0
å¦‚æœ treeNode.val == x ä¸” treeNode.left != nullï¼Œé‚£ä¹ˆ treeNode.left.val == 2 * x + 1
å¦‚æœ treeNode.val == x ä¸” treeNode.right != nullï¼Œé‚£ä¹ˆ treeNode.right.val == 2 * x + 2
ç°åœ¨è¿™ä¸ªäºŒå‰æ ‘å—åˆ°ã€Œæ±¡æŸ“ã€ï¼Œæ‰€æœ‰çš„ treeNode.val éƒ½å˜æˆäº† -1ã€‚

è¯·ä½ å…ˆè¿˜åŸäºŒå‰æ ‘ï¼Œç„¶åå®ç° FindElements ç±»ï¼š

FindElements(TreeNode* root) ç”¨å—æ±¡æŸ“çš„äºŒå‰æ ‘åˆå§‹åŒ–å¯¹è±¡ï¼Œä½ éœ€è¦å…ˆæŠŠå®ƒè¿˜åŸã€‚
bool find(int target) åˆ¤æ–­ç›®æ ‡å€¼ target æ˜¯å¦å­˜åœ¨äºè¿˜åŸåçš„äºŒå‰æ ‘ä¸­å¹¶è¿”å›ç»“æœã€‚


ç¤ºä¾‹ 1ï¼š

![](https://tva1.sinaimg.cn/large/007S8ZIlly1ghlua6htirj308w03bdfo.jpg)

è¾“å…¥ï¼š
["FindElements","find","find"]
[[[-1,null,-1]],[1],[2]]
è¾“å‡ºï¼š
[null,false,true]
è§£é‡Šï¼š
FindElements findElements = new FindElements([-1,null,-1]);
findElements.find(1); // return False
findElements.find(2); // return True
ç¤ºä¾‹ 2ï¼š

![](https://tva1.sinaimg.cn/large/007S8ZIlly1ghlua84ataj30b405idfu.jpg)

è¾“å…¥ï¼š
["FindElements","find","find","find"]
[[[-1,-1,-1,-1,-1]],[1],[3],[5]]
è¾“å‡ºï¼š
[null,true,true,false]
è§£é‡Šï¼š
FindElements findElements = new FindElements([-1,-1,-1,-1,-1]);
findElements.find(1); // return True
findElements.find(3); // return True
findElements.find(5); // return False
ç¤ºä¾‹ 3ï¼š

![](https://tva1.sinaimg.cn/large/007S8ZIlly1ghlua8rj84j308i07m3yh.jpg)

è¾“å…¥ï¼š
["FindElements","find","find","find","find"]
[[[-1,null,-1,-1,null,-1]],[2],[3],[4],[5]]
è¾“å‡ºï¼š
[null,true,false,false,true]
è§£é‡Šï¼š
FindElements findElements = new FindElements([-1,null,-1,-1,null,-1]);
findElements.find(2); // return True
findElements.find(3); // return False
findElements.find(4); // return False
findElements.find(5); // return True


æç¤ºï¼š

TreeNode.val == -1
äºŒå‰æ ‘çš„é«˜åº¦ä¸è¶…è¿‡ 20
èŠ‚ç‚¹çš„æ€»æ•°åœ¨ [1, 10^4] ä¹‹é—´
è°ƒç”¨ find() çš„æ€»æ¬¡æ•°åœ¨ [1, 10^4] ä¹‹é—´
0 <= target <= 10^6

```
```

## å‰ç½®çŸ¥è¯†

- äºŒè¿›åˆ¶

## æš´åŠ›æ³•

## å…¬å¸

- æš‚æ— 

### æ€è·¯

æœ€ç®€å•æƒ³æ³•å°±æ˜¯é€’å½’å»ºç«‹æ ‘ï¼Œç„¶å find çš„æ—¶å€™é€’å½’æŸ¥æ‰¾å³å¯ï¼Œä»£ç ä¹Ÿå¾ˆç®€å•ã€‚

### ä»£ç 

Pythpn Code:

```
<pre class="calibre18">```
<span class="hljs-title"># Definition for a binary tree node.</span>
<span class="hljs-title"># class TreeNode:</span>
<span class="hljs-title">#     def __init__(self, x):</span>
<span class="hljs-title">#         self.val = x</span>
<span class="hljs-title">#         self.left = None</span>
<span class="hljs-title">#         self.right = None</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FindElements</span>:</span>
    node = <span class="hljs-keyword">None</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(self, root: TreeNode)</span>:</span>
        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">recover</span><span class="hljs-params">(node)</span>:</span>
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> node:
                <span class="hljs-keyword">return</span> node;
            <span class="hljs-keyword">if</span> node.left:
                node.left.val =  <span class="hljs-params">2</span> * node.val + <span class="hljs-params">1</span>
            <span class="hljs-keyword">if</span> node.right:
                 node.right.val = <span class="hljs-params">2</span> * node.val + <span class="hljs-params">2</span>
            recover(node.left)
            recover(node.right)
            <span class="hljs-keyword">return</span> node
        root.val = <span class="hljs-params">0</span>
        self.node = recover(root)


    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">find</span><span class="hljs-params">(self, target: int)</span> -> bool:</span>
        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findInTree</span><span class="hljs-params">(node, target)</span>:</span>
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> node:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">False</span>
            <span class="hljs-keyword">if</span> node.val == target:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">True</span>
            <span class="hljs-keyword">return</span> findInTree(node.left, target) <span class="hljs-keyword">or</span> findInTree(node.right, target)
        <span class="hljs-keyword">return</span> findInTree(self.node, target)




<span class="hljs-title"># Your FindElements object will be instantiated and called as such:</span>
<span class="hljs-title"># obj = FindElements(root)</span>
<span class="hljs-title"># param_1 = obj.find(target)</span>

```
```

ä¸Šè¿°ä»£ç ä¼šè¶…æ—¶ï¼Œæˆ‘ä»¬æ¥è€ƒè™‘ä¼˜åŒ–ã€‚

## ç©ºé—´æ¢æ—¶é—´

### æ€è·¯

ä¸Šè¿°ä»£ç ä¼šè¶…æ—¶ï¼Œæˆ‘ä»¬è€ƒè™‘ä½¿ç”¨ç©ºé—´æ¢æ—¶é—´ã€‚ å»ºç«‹æ ‘çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰å€¼å­˜åˆ°ä¸€ä¸ªé›†åˆä¸­å»ã€‚å½“éœ€è¦ find çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç›´æ¥æŸ¥æ‰¾ set å³å¯ï¼Œæ—¶é—´å¤æ‚åº¦ O(1)ã€‚

### ä»£ç 

```
<pre class="calibre18">```
<span class="hljs-title"># Definition for a binary tree node.</span>
<span class="hljs-title"># class TreeNode:</span>
<span class="hljs-title">#     def __init__(self, x):</span>
<span class="hljs-title">#         self.val = x</span>
<span class="hljs-title">#         self.left = None</span>
<span class="hljs-title">#         self.right = None</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FindElements</span>:</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(self, root: TreeNode)</span>:</span>
        <span class="hljs-title"># set ä¸èƒ½æ”¾åœ¨initå¤–ä¾§ã€‚ å› ä¸ºæµ‹è¯•ç”¨ä¾‹ä¹‹é—´ä¸ä¼šé”€æ¯FindElementsçš„å˜é‡</span>
        self.seen = set()
        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">recover</span><span class="hljs-params">(node)</span>:</span>
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> node:
                <span class="hljs-keyword">return</span> node;
            <span class="hljs-keyword">if</span> node.left:
                node.left.val =  <span class="hljs-params">2</span> * node.val + <span class="hljs-params">1</span>
                self.seen.add(node.left.val)
            <span class="hljs-keyword">if</span> node.right:
                 node.right.val = <span class="hljs-params">2</span> * node.val + <span class="hljs-params">2</span>
                 self.seen.add(node.right.val)
            recover(node.left)
            recover(node.right)
            <span class="hljs-keyword">return</span> node
        root.val = <span class="hljs-params">0</span>
        self.seen.add(<span class="hljs-params">0</span>)
        self.node = recover(root)


    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">find</span><span class="hljs-params">(self, target: int)</span> -> bool:</span>
        <span class="hljs-keyword">return</span> target <span class="hljs-keyword">in</span> self.seen




<span class="hljs-title"># Your FindElements object will be instantiated and called as such:</span>
<span class="hljs-title"># obj = FindElements(root)</span>
<span class="hljs-title"># param_1 = obj.find(target)</span>

```
```

è¿™ç§è§£æ³•å¯ä»¥ ACï¼Œä½†æ˜¯åœ¨æ•°æ®é‡éå¸¸å¤§çš„æ—¶å€™ï¼Œå¯èƒ½ MLEï¼Œæˆ‘ä»¬ç»§ç»­è€ƒè™‘ä¼˜åŒ–ã€‚

## äºŒè¿›åˆ¶æ³•

### æ€è·¯

è¿™æ˜¯ä¸€ç§éå¸¸å·§å¦™çš„åšæ³•ã€‚

å¦‚æœæˆ‘ä»¬æŠŠæ ‘ä¸­çš„æ•°å…¨éƒ¨åŠ  1 ä¼šæ€ä¹ˆæ ·ï¼Ÿ

![](images/18267ef23a60f51aa92a2bc8f957101f932ae5cf.jpg)ï¼ˆå›¾å‚è€ƒ [https://leetcode.com/problems/find-elements-in-a-contaminated-binary-tree/discuss/431229/Python-Special-Way-for-find()-without-HashSet-O(1)-Space-O(logn)-Timeï¼‰](https://leetcode.com/problems/find-elements-in-a-contaminated-binary-tree/discuss/431229/Python-Special-Way-for-find()-without-HashSet-O(1)-Space-O(logn)-Time%EF%BC%89)

ä»”ç»†è§‚å¯Ÿå‘ç°ï¼Œæ¯ä¸€è¡Œçš„å·¦å³å­æ ‘åˆ†åˆ«æœ‰ä¸åŒçš„å‰ç¼€ï¼š

![](images/d5c4a4ae9e751c18c65d9f87e739f4f4c667a636.jpg)

Okï¼Œé‚£ä¹ˆç®—æ³•å°±æ¥äº†ã€‚ä¸ºäº†ä¾¿äºç†è§£ï¼Œæˆ‘ä»¬æ¥ä¸¾ä¸ªå…·ä½“çš„ä¾‹å­ï¼Œæ¯”å¦‚ target æ˜¯ 9ï¼Œæˆ‘ä»¬é¦–å…ˆå°†å…¶åŠ  1ï¼ŒäºŒè¿›åˆ¶è¡¨ç¤ºå°±æ˜¯ 1010ã€‚ä¸è€ƒè™‘ç¬¬ä¸€ä½ï¼Œå°±æ˜¯ 010ï¼Œæˆ‘ä»¬åªè¦ï¼š

- 0 å‘å·¦ ğŸ‘ˆ
- 1 å‘å³ ğŸ‘‰
- - 0 å‘å·¦ ğŸ‘ˆ

å°±å¯ä»¥æ‰¾åˆ° 9 äº†ã€‚

> 0 è¡¨ç¤ºå‘å·¦ ï¼Œ 1 è¡¨ç¤ºå‘å³

### ä»£ç 

```
<pre class="calibre18">```
<span class="hljs-title"># Definition for a binary tree node.</span>
<span class="hljs-title"># class TreeNode:</span>
<span class="hljs-title">#     def __init__(self, x):</span>
<span class="hljs-title">#         self.val = x</span>
<span class="hljs-title">#         self.left = None</span>
<span class="hljs-title">#         self.right = None</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FindElements</span>:</span>
    node = <span class="hljs-keyword">None</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(self, root: TreeNode)</span>:</span>
        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">recover</span><span class="hljs-params">(node)</span>:</span>
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> node:
                <span class="hljs-keyword">return</span> node;
            <span class="hljs-keyword">if</span> node.left:
                node.left.val =  <span class="hljs-params">2</span> * node.val + <span class="hljs-params">1</span>
            <span class="hljs-keyword">if</span> node.right:
                 node.right.val = <span class="hljs-params">2</span> * node.val + <span class="hljs-params">2</span>
            recover(node.left)
            recover(node.right)
            <span class="hljs-keyword">return</span> node
        root.val = <span class="hljs-params">0</span>
        self.node = recover(root)


    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">find</span><span class="hljs-params">(self, target: int)</span> -> bool:</span>
        node = self.node
        <span class="hljs-keyword">for</span> bit <span class="hljs-keyword">in</span> bin(target+<span class="hljs-params">1</span>)[<span class="hljs-params">3</span>:]:
            node = node <span class="hljs-keyword">and</span> (node.left, node.right)[int(bit)]
        <span class="hljs-keyword">return</span> bool(node)




<span class="hljs-title"># Your FindElements object will be instantiated and called as such:</span>
<span class="hljs-title"># obj = FindElements(root)</span>
<span class="hljs-title"># param_1 = obj.find(target)</span>

```
```

## å…³é”®ç‚¹è§£æ

- ç©ºé—´æ¢æ—¶é—´
- äºŒè¿›åˆ¶æ€ç»´
- å°† target + 1